<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ubuntu Web Desktop ‚Äì Moderne</title>
<style>
  :root{
    --bg: #111316;
    --panel: #1a1d22;
    --panel-2: #14171b;
    --accent: #E95420; /* Ubuntu orange */
    --aubergine: #77216F; /* Ubuntu aubergine */
    --text: #e6e8eb;
    --text-dim: #b2b6be;
    --win: #1f242b;
    --win-header: #2a2f36;
    --border: #00000040;
    --shadow: #00000090;
    --button: #2b3139;
    --button-hover: #343b45;
    --ok: #1f6feb;
  }
  *{box-sizing:border-box}
  html,body{
    height:100%; margin:0; background:var(--bg); color:var(--text);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, sans-serif;
    overflow:hidden;
  }

  /* Fond Ubuntu + Tux en SVG (l√©ger) */
  body::before{
    content:"";
    position:fixed; inset:0;
    z-index:-1;
  }
.topbar{
  position:fixed; top:0; left:0; right:0; height:44px;
  background:linear-gradient(to bottom,var(--panel),var(--panel-2));
  border-bottom:1px solid var(--border);
  display:grid; grid-template-columns: 220px 1fr 260px; align-items:center;
  padding:0 10px; z-index:1000;
}
.top-left{display:flex; align-items:center; gap:10px}
.brand{
  width:22px;height:22px;border-radius:50%;
  background: conic-gradient(from 180deg,var(--accent),var(--accent-2),var(--accent));
  box-shadow:0 0 0 2px #00000030;
}
.menu{display:flex; gap:12px; font-weight:600}
.menu span{color:var(--text-dim); cursor:default}
.menu span.active{color:var(--text);}
.top-center{justify-self:center; color:var(--text-dim); font-size:14px}
/* Assure la m√™me taille, alignement et jauge visuelle */
.top-right .chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--border, #00000040);
  background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.12));
  color:var(--text, #e9eaec);
  box-shadow:0 6px 16px rgba(0,0,0,0.45);
  backdrop-filter: blur(6px);
  font-size:12px;
  font-weight:700;
  min-height:28px;
  line-height:1;
  transition: transform .18s, box-shadow .18s, filter .18s;
}
/* Style am√©lior√© pour les ic√¥nes de la topbar */
.top-right .chip {
    background: linear-gradient(180deg, #ffffff18, #00000030);
    border: 1px solid #ffffff25;
    color: #f5f6f7;
    font-weight: 700;
    padding: 6px 14px;
    border-radius: 14px;
    box-shadow: 0 4px 12px #00000070, inset 0 1px 0 #ffffff40;
    backdrop-filter: blur(8px);
    transition: transform .15s, box-shadow .15s, background .15s;
}

/* Effet hover moderne */
.top-right .chip:hover {
    transform: translateY(-1px);
    background: linear-gradient(180deg, #ffffff22, #00000040);
    box-shadow: 0 6px 16px #00000090, inset 0 1px 0 #ffffff55;
}

/* Ic√¥nes un peu plus grandes */
.top-right .chip {
    font-size: 14px;
}

/* Espacement am√©lioration */
.top-right {
    gap: 12px;
}

  /* Barre du haut */
  .topbar{
    position:fixed; top:0; left:0; right:0; height:46px;
    background:linear-gradient(to bottom,var(--panel),var(--panel-2));
    border-bottom:1px solid var(--border);
    display:grid; grid-template-columns: 300px 1fr 280px; align-items:center;
    padding:0 14px; z-index:1000;
  }
  .brand{
    width:24px; height:24px; border-radius:50%;
    background: conic-gradient(from 180deg,var(--accent),var(--aubergine),var(--accent));
    box-shadow:0 0 0 2px #00000030;
  }
  .menu{display:flex; gap:14px; font-weight:600}
  .menu span{color:var(--text-dim)}
  .menu .active{color:var(--text)}
  .top-center{justify-self:center; color:var(--text-dim); font-size:14px}
  .top-right{justify-self:end; display:flex; align-items:center; gap:10px}
  .chip{background:#22262c; border:1px solid var(--border); padding:6px 12px; border-radius:10px; font-size:12px; color:var(--text-dim)}

  /* Dock (discret) */
  .dock{
    position:fixed; top:60px; left:18px; bottom:18px; width:76px;
    background:#14171bcc; backdrop-filter: blur(6px);
    border:1px solid var(--border); border-radius:16px; padding:12px 10px;
    display:flex; flex-direction:column; align-items:center; gap:14px; z-index:900;
  }
  .app{
    width:52px; height:52px; border-radius:16px; background:#22262c; border:1px solid #00000055;
    color:#fff; font-size:22px; display:grid; place-items:center; cursor:pointer; position:relative; transition:.18s;
  }
  .app:hover{transform:scale(1.06); background:#2a3038}
  .app .dot{position:absolute; bottom:-4px; left:50%; transform:translateX(-50%); width:6px; height:6px; border-radius:50%; background:var(--accent)}

  /* Bureau + grille de gros boutons (verre d√©poli) */
  .desktop{position:fixed; inset:60px 0 0 0; padding:24px 24px 24px 120px}
  .apps-grid{
    display:grid; grid-template-columns: repeat(3, minmax(240px, 1fr)); gap:18px;
  }
  .glass-btn{
    position:relative;
    background:linear-gradient(180deg, #ffffff1a, #ffffff08);
    border:1px solid #ffffff1f;
    border-radius:18px;
    padding:18px;
    backdrop-filter: blur(10px);
    box-shadow: 0 20px 40px #00000075, inset 0 1px 0 #ffffff22;
    color:#fff; cursor:pointer; transition:transform .16s, box-shadow .16s;
    display:flex; align-items:center; gap:16px;
  }
  .glass-btn:hover{ transform: translateY(-2px); box-shadow: 0 28px 60px #00000090, inset 0 1px 0 #ffffff2a; }
  .glass-icon{
    width:58px; height:58px; border-radius:16px;
    display:grid; place-items:center; font-size:30px;
    background: radial-gradient(60% 60% at 50% 50%, #ffffff33, #ffffff0d);
    border:1px solid #ffffff26;
  }
  .glass-info{display:flex; flex-direction:column}
  .glass-title{font-weight:800; letter-spacing:.2px}
  .glass-sub{color:#c9cdd3; font-size:13px}

  /* Fen√™tres (ferm√©es par d√©faut pour Fichiers) */
  .window{
    position:absolute; top:120px; left:160px; width:760px; min-width:440px; min-height:280px;
    background:var(--win); border:1px solid var(--border); border-radius:14px;
    box-shadow:0 22px 60px var(--shadow); overflow:hidden; resize:both;
    display:none; /* toutes ferm√©es au d√©part */
  }
  .window.active{
    width: 100%;
    box-shadow:0 30px 80px #000000a0;
  }
  .titlebar{
    height:48px; background:linear-gradient(to bottom,#2b3037,var(--win-header));
    display:grid; grid-template-columns: 1fr auto; align-items:center; padding:0 14px;
    cursor:move; border-bottom:1px solid #00000035;
  }
  .win-title{font-weight:800; color:var(--text); letter-spacing:.25px}
  .controls{display:flex; align-items:center; gap:10px}
  .ctrl{
    width:34px; height:30px; border-radius:10px; background:var(--button); border:1px solid #00000055;
    display:grid; place-items:center; color:#eaecef; font-size:14px; cursor:pointer; transition:.14s;
  }
  .ctrl:hover{background:var(--button-hover)}
  .ctrl.min{background:#5a563d} .ctrl.max{background:#3d5a44} .ctrl.close{background:#5a3d40}

  .window-content{display:grid; grid-template-columns: 240px 1fr; min-height:220px}
  .sidebar{background:#232830; border-right:1px solid var(--border); padding:12px}
  .side-title{font-size:12px; color:var(--text-dim); margin:8px 6px; text-transform:uppercase; letter-spacing:.6px}
  .side-item{display:flex; align-items:center; gap:10px; padding:8px 10px; border-radius:10px; cursor:pointer; color:var(--text-dim)}
  .side-item.active{background:#2b3139; color:var(--text)}
  .side-item:hover{background:#2a3038; color:var(--text)}
  .side-icon{width:22px; height:22px; display:grid; place-items:center; font-size:16px}

  .content{background:#1c2128; padding:16px }
  .toolbar{display:flex; gap:10px; align-items:center; margin-bottom:12px}
  .tool{background:var(--button); border:1px solid var(--border); color:var(--text); padding:8px 12px; border-radius:10px; font-size:13px; cursor:pointer}
  .tool:hover{filter:brightness(1.08)}

  .grid{display:grid; grid-template-columns:repeat(4,1fr); gap:12px}
  .card{background:#22262c; border:1px solid var(--border); border-radius:12px; padding:12px}
  .card .name{font-weight:700; margin-bottom:6px}
  .card .meta{color:var(--text-dim); font-size:12px}

  /* Apps */
  textarea.note{
    width:100%; height:280px; background:#0f141a; color:#eef0f3; border:1px solid #00000055;
    border-radius:12px; padding:12px; resize:none; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  }
  .calc-wrap{display:grid; grid-template-columns:1fr; gap:12px}
  .calc-display{
    width:100%; font-size:22px; padding:12px; border-radius:12px; border:1px solid #00000055;
    background:#0f141a; color:#eaecef;
  }
  .calc-grid{display:grid; grid-template-columns:repeat(4,1fr); gap:10px}
  .btn{background:#232830; border:1px solid #00000055; color:#eaecef; padding:12px; border-radius:12px; font-size:16px; cursor:pointer}
  .btn.op{background:#523e62}
  .btn.eq{background:var(--ok)}
  .btn:hover{filter:brightness(1.08)}

  .terminal{
    background:#0d1117; color:#c9d1d9; border:1px solid #00000060; border-radius:12px; padding:12px;
    font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; height:300px; overflow:auto;
  }
  .prompt{color:#81c995}
  .input-line{
    width:100%; background:#010409; color:#81c995; border:1px solid #00000060;
    border-radius:12px; padding:12px; font-family:inherit; margin-top:10px;
  }

  .browser-bar{display:flex; gap:10px; margin-bottom:10px}
  .url{flex:1; padding:10px; border-radius:12px; border:1px solid #00000055; background:#0f141a; color:#eaecef}
  .frame{width:100%; height:340px; border:none; border-radius:12px; background:#fff}
  
  .page {
  min-height: 100vh; /* occupe au moins la hauteur du viewport */
}

</style>
</head>
<body>
      <img src="image.png" alt="Wallpaper" style="position:fixed; inset:0; margin-top:0%; width:100%; height:130%;"/>

  <!-- Top bar -->
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:12px">
      <div class="brand" aria-hidden="true"></div>
      <div class="menu">
        <span class="active">Ubuntwo</span>
      </div>
    </div>
    <div class="top-center" id="clock">‚Äî</div>
    <div class="top-right">
      <span class="chip">üîà 65%</span>
      <span class="chip">üì∂</span>
      <span class="chip">üîã 82%</span>
      <span class="chip">Param√®tres</span>
    </div>
  </div>

  <!-- Dock -->
  <div class="dock">
    <div class="app" data-app="fichier" title="Fichiers">üóÇ<span class="dot"></span></div>
    <div class="app" data-app="notes" title="Bloc-notes">üìù<span class="dot"></span></div>
    <div class="app" data-app="target" title="Objectif">‚úÖ<span class="dot"></span></div>
    <div class="app" data-app="terminal" title="Terminal">‚å®Ô∏è<span class="dot"></span></div>
    <div class="app" data-app="nav" title="Navigateur">üåê<span class="dot"></span></div>
    <div class="app" data-app="snake" title="Snake">üêç<span class="dot"></span></div>
    <div class="app" data-app="cible" title="Laser Game">üéØ<span class="dot"></span></div>
    <div class="app" data-app="shoot" title="GAFAM WAR">üöÄ<span class="dot"></span></div>
    <div class="app" data-app="contact" title="Contact">üìû<span class="dot"></span></div>

  </div>

  <!-- Desktop: gros boutons verre d√©poli -->
  <!-- <div class="desktop">
    <div class="apps-grid">
      <div class="glass-btn" data-open="notes">
        <div class="glass-icon">üìù</div>
        <div class="glass-info">
          <div class="glass-title">Bloc‚Äënotes</div>
          <div class="glass-sub">√âcris, sauvegarde automatiquement, Ctrl+S</div>
        </div>
      </div>
      <div class="glass-btn" data-open="calc">
        <div class="glass-icon">üßÆ</div>
        <div class="glass-info">
          <div class="glass-title">Calculatrice</div>
          <div class="glass-sub">Op√©rations de base sans eval</div>
        </div>
      </div>
      <div class="glass-btn" data-open="terminal">
        <div class="glass-icon">‚å®Ô∏è</div>
        <div class="glass-info">
          <div class="glass-title">Terminal</div>
          <div class="glass-sub">help, echo, ls, date, uname, clear</div>
        </div>
      </div>
      <div class="glass-btn" data-open="browser">
        <div class="glass-icon">üåê</div>
        <div class="glass-info">
          <div class="glass-title">Navigateur</div>
          <div class="glass-sub">URL + sandbox (Go / Stop)</div>
        </div>
      </div>
      <div class="glass-btn" data-open="files">
        <div class="glass-icon">üóÇ</div>
        <div class="glass-info">
          <div class="glass-title">Fichiers</div>
          <div class="glass-sub">Explorateur (n‚Äôouvre pas au d√©marrage)</div>
        </div>
      </div>
    </div>
  </div> -->

  <!-- Fen√™tres (toutes ferm√©es par d√©faut) -->
  <!-- Fichiers -->
  <div class="window" id="win-files" style="top:120px; left:160px; width:760px;">
    <div class="titlebar">
      <div class="win-title">Fichiers</div>
      <div class="controls">
        <div class="ctrl min" data-act="min" title="Minimiser">‚Äî</div>
        <div class="ctrl max" data-act="max" title="Maximiser">‚ñ°</div>
        <div class="ctrl close" data-act="close" title="Fermer">√ó</div>
      </div>
    </div>
    <div class="window-content">
      <div class="sidebar">
        <div class="side-title">Raccourcis</div>
        <div class="side-item active"><div class="side-icon">üè†</div> Accueil</div>
        <div class="side-item"><div class="side-icon">üìÑ</div> Documents</div>
        <div class="side-item"><div class="side-icon">üéµ</div> Musique</div>
        <div class="side-item"><div class="side-icon">üé¨</div> Vid√©os</div>
        <div class="side-item"><div class="side-icon">üì∏</div> Images</div>
        <div class="side-title">P√©riph√©riques</div>
        <div class="side-item"><div class="side-icon">üíΩ</div> Disque</div>
        <div class="side-item"><div class="side-icon">üíæ</div> USB</div>
      </div>
      <div class="content">
        <div class="toolbar">
          <button class="tool" id="navBack">‚Üê</button>
          <button class="tool" id="navFwd">‚Üí</button>
          <button class="tool" id="navRefresh">Actualiser</button>
          <button class="tool">Vue grille</button>
          <button class="tool">Vue liste</button>
        </div>
        <div class="grid">
          <div class="card"><div class="name">Projets</div><div class="meta">Dossier ¬∑ 12 √©l√©ments</div></div>
          <div class="card"><div class="name">Rapports</div><div class="meta">Dossier ¬∑ 7 √©l√©ments</div></div>
          <div class="card"><div class="name">notes.txt</div><div class="meta">Fichier texte ¬∑ 4 Ko</div></div>
          <div class="card"><div class="name">photo.png</div><div class="meta">Image ¬∑ 1.2 Mo</div></div>
          <div class="card"><div class="name">musique.mp3</div><div class="meta">Audio ¬∑ 4.3 Mo</div></div>
          <div class="card"><div class="name">video.mp4</div><div class="meta">Vid√©o ¬∑ 85 Mo</div></div>
          <div class="card"><div class="name">Archive.zip</div><div class="meta">Archive ¬∑ 22 Mo</div></div>
          <div class="card"><div class="name">Design</div><div class="meta">Dossier ¬∑ 9 √©l√©ments</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Bloc-notes -->
  <div class="window" id="win-notes" style="top:160px; left:320px; width:560px;">
    <div class="titlebar">
      <div class="win-title">Bloc-notes</div>
      <div class="controls">
        <div class="ctrl min" data-act="min">‚Äî</div>
        <div class="ctrl max" data-act="max">‚ñ°</div>
        <div class="ctrl close" data-act="close">√ó</div>
      </div>
    </div>
    <div class="window-content" style="grid-template-columns:1fr">
      <div class="content">
        <div class="toolbar">
          <button class="tool" id="notesSave">Sauvegarder</button>
          <button class="tool" id="notesClear">Effacer</button>
        </div>
        <textarea id="notesArea" class="note" placeholder="√âcris ici... (auto-sauvegarde)"></textarea>
        <div style="color:var(--text-dim); font-size:12px; margin-top:8px">Astuce: Ctrl+S pour sauvegarder</div>
      </div>
    </div>
  </div>

  <!-- Calculatrice -->
  <div class="window" id="win-calc" style="top:220px; left:540px; width:360px;">
    <div class="titlebar">
      <div class="win-title">Calculatrice</div>
      <div class="controls">
        <div class="ctrl min" data-act="min">‚Äî</div>
        <div class="ctrl max" data-act="max">‚ñ°</div>
        <div class="ctrl close" data-act="close">√ó</div>
      </div>
    </div>
    <div class="window-content" style="grid-template-columns:1fr">
      <div class="content">
        <div class="calc-wrap">
          <input id="calcDisplay" class="calc-display" readonly />
          <div class="calc-grid" id="calcGrid"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Terminal -->
  <div class="window" id="win-terminal" style="top:260px; left:220px; width:600px;">
    <div class="titlebar">
      <div class="win-title">Terminal</div>
      <div class="controls">
        <div class="ctrl min" data-act="min">‚Äî</div>
        <div class="ctrl max" data-act="max">‚ñ°</div>
        <div class="ctrl close" data-act="close">√ó</div>
      </div>
    </div>
    <div class="window-content" style="grid-template-columns:1fr">
      <div class="content">
        <div id="terminalOutput" class="terminal" aria-live="polite"></div>
        <input id="terminalInput" class="input-line" placeholder="help, echo, ls, date, uname, clear" />
      </div>
    </div>
  </div>


<div class="window" id="win-nav" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Navigateur</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

  <!-- Barre d'URL ajout√©e -->
  <div class="nav-toolbar" style="display:flex; align-items:center; gap:8px; padding:8px; border-top:1px solid rgba(0,0,0,0.06); border-bottom:1px solid rgba(0,0,0,0.06); background:linear-gradient(#fafafa,#f5f5f5);">
    <button id="nav-back" data-act="back" aria-label="Retour" style="min-width:36px; height:36px; border:1px solid #ddd; background:#fff; border-radius:6px; cursor:pointer;">‚óÄ</button>
    <button id="nav-forward" data-act="forward" aria-label="Avancer" style="min-width:36px; height:36px; border:1px solid #ddd; background:#fff; border-radius:6px; cursor:pointer;">‚ñ∂</button>
    <input id="nav-url" type="text" placeholder="Entrer une URL ou une recherche" style="flex:1; height:36px; padding:6px 10px; border:1px solid #ccc; border-radius:8px; font-size:13px;" />
    <button id="nav-go" data-act="go" aria-label="Aller" style="min-width:56px; height:36px; border:0; background:#0078d4; color:#fff; border-radius:8px; cursor:pointer;">Aller</button>
    <button id="nav-reload" data-act="reload" aria-label="Recharger" style="min-width:36px; height:36px; border:1px solid #ddd; background:#fff; border-radius:6px; cursor:pointer;">‚ü≥</button>
  </div>

  <div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 96px);">
    <div class="content" style="position:relative; padding:0; height:100%;">
      <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
      <div style="position:relative; width:100%; height:100%;">
        <iframe
          id="nav-iframe"
          src="https://ggoutard.github.io/projet-nuit-info-2025/tuxtuxgo/index.html"
          style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
          frameborder="0"
          scrolling="auto"
          title="T√¢ches - iframe">
        </iframe>
      </div>
    </div>
  </div>
</div>

  

<div class="window" id="win-contact" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Contact</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/formulaire/formulaire.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>

<div class="window" id="win-snake" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Snake</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/snake/index.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>


<div class="window" id="win-cible" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Laser Game</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/lasergame/index.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>

<div class="window" id="win-shoot" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">GAFAM WAR</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/shootthemup/index.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>



<div class="window" id="win-target" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Target</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/quetes/quetes.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>

<div class="window" id="win-fichier" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Explorateur de fichiers</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/explorateur/index.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>

<div class="window" id="win-term" style="top:240px; left:480px; width:420px;">
  <div class="titlebar">
    <div class="win-title">Terminal</div>
    <div class="controls">
      <div class="ctrl min" data-act="min">‚Äî</div>
      <div class="ctrl max" data-act="max">‚ñ°</div>
      <div class="ctrl close" data-act="close">√ó</div>
    </div>
  </div>

<div class="window-content" style="grid-template-columns:1fr; height: calc(100% - 48px);">
  <div class="content" style="position:relative; padding:0; height:100%;">
    <!-- Conteneur qui occupe tout l'espace restant (sans toolbar) -->
    <div style="position:relative; width:100%; height:100%;">
      <iframe
        src="https://ggoutard.github.io/projet-nuit-info-2025/terminal/terminal.html"
        style="position:absolute; inset:0; width:100%; height:100%; border:0; display:block;"
        frameborder="0"
        scrolling="auto"
        title="T√¢ches - iframe">
      </iframe>
    </div>
  </div>
</div>
</div>




<script>
  // Horloge
  const clockEl = document.getElementById('clock');
  function updateClock(){
    const d=new Date();
    const jours=['Dim','Lun','Mar','Mer','Jeu','Ven','Sam'];
    const mois=['jan','f√©v','mar','avr','mai','juin','juil','ao√ª','sep','oct','nov','d√©c'];
    clockEl.textContent = `${jours[d.getDay()]} ${d.getDate()} ${mois[d.getMonth()]} ¬∑ ${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
  }
  updateClock(); setInterval(updateClock, 30_000);

  // Fen√™tres: toutes ferm√©es au d√©marrage (display:none dans CSS)
  const windows = Array.from(document.querySelectorAll('.window'));
  function focusWindow(win){ windows.forEach(w=>w.classList.remove('active')); win.classList.add('active'); }

  // Ouvrir/fermer/min/max
  function openWin(id){ const w=document.getElementById('win-'+id); if(!w) return; w.style.display='block'; w.style.opacity='1'; focusWindow(w); }
  function closeWin(w){ w.style.display='none'; }
  function minWin(w){ w.style.opacity='0.35'; }
  function maxWin(w){
    w.style.opacity='1';
    w.style.left='120px'; w.style.top='80px';
    w.style.width=(window.innerWidth-180)+'px';
    w.style.height=(window.innerHeight-100)+'px';
  }

  // Drag via titlebar
  windows.forEach(w=>{
    const bar=w.querySelector('.titlebar');
    let dragging=false, ox=0, oy=0;
    bar.addEventListener('mousedown', e=>{
      dragging=true;
      const rect=w.getBoundingClientRect();
      ox=e.clientX - rect.left; oy=e.clientY - rect.top;
      document.body.style.cursor='grabbing';
      focusWindow(w);
    });
    window.addEventListener('mousemove', e=>{
      if(!dragging) return;
      const x=e.clientX - ox, y=e.clientY - oy;
      w.style.left=Math.max(100, x)+'px';
      w.style.top=Math.max(80, y)+'px';
    });
    window.addEventListener('mouseup', ()=>{ dragging=false; document.body.style.cursor=''; });
  });

  // Contr√¥les √† droite
  document.querySelectorAll('.controls .ctrl').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const act = e.currentTarget.dataset.act;
      const win = e.currentTarget.closest('.window');
      if(act==='close'){ closeWin(win); return; }
      if(act==='min'){ minWin(win); return; }
      if(act==='max'){ maxWin(win); return; }
    });
  });

  // Dock
  const appMap = { fichier:'fichier', notes:'notes', calc:'calc', terminal:'term', nav:'nav',todo: 'todo'};
  
appMap['contact'] = 'contact';
appMap['snake'] = 'snake';
appMap['cible'] = 'cible';
appMap['shoot'] = 'shoot';
appMap['target'] = 'target';



  
  document.querySelectorAll('.dock .app').forEach(app=>{
    app.addEventListener('click', ()=> openWin(appMap[app.dataset.app]));
  });

  // Gros boutons verre d√©poli
  document.querySelectorAll('.glass-btn').forEach(b=>{
    b.addEventListener('click', ()=> openWin(b.dataset.open));
  });

  // Fichiers (demo)
  const refreshBtn = document.getElementById('navRefresh');
  if(refreshBtn){
    refreshBtn.addEventListener('click', ()=>{
      const metas = document.querySelectorAll('#win-files .card .meta');
      metas.forEach(m=> m.textContent = m.textContent.replace(' ¬∑ mis √† jour','') + ' ¬∑ mis √† jour');
    });
  }

  // Bloc-notes: auto-sauvegarde + Ctrl+S
  const notesArea = document.getElementById('notesArea');
  if(notesArea){
    function saveNotes(){ localStorage.setItem('notes', notesArea.value); }
    document.getElementById('notesSave').addEventListener('click', ()=>{ saveNotes(); alert('Notes sauvegard√©es'); });
    document.getElementById('notesClear').addEventListener('click', ()=>{
      if(confirm('Effacer toutes les notes ?')){ notesArea.value=''; saveNotes(); }
    });
    notesArea.addEventListener('input', saveNotes);
    window.addEventListener('load', ()=>{ const saved=localStorage.getItem('notes'); if(saved) notesArea.value=saved; });
    window.addEventListener('keydown', (e)=>{
      if((e.ctrlKey||e.metaKey) && e.key.toLowerCase()==='s'){ e.preventDefault(); saveNotes(); alert('Sauvegard√©'); }
    });
  }

  // Calculatrice (sans eval)
  const calcGrid = document.getElementById('calcGrid');
  const calcDisplay = document.getElementById('calcDisplay');
  if(calcGrid && calcDisplay){
    let calcState = { a:null, op:null, b:null, fresh:true };
    function setDisplay(txt){ calcDisplay.value = txt; }
    function applyOp(a,op,b){
      a=parseFloat(a); b=parseFloat(b);
      if(Number.isNaN(a)||Number.isNaN(b)) return NaN;
      switch(op){ case '+': return a+b; case '‚àí': return a-b; case '√ó': return a*b; case '√∑': return b===0?NaN:a/b; default: return NaN; }
    }
    function press(k){
      if(k==='C'){ calcState={a:null,op:null,b:null,fresh:true}; setDisplay(''); return; }
      if(k==='='){
        if(calcState.a!==null && calcState.op && calcState.b!==null){
          const r = applyOp(calcState.a, calcState.op, calcState.b);
          setDisplay(Number.isFinite(r)? r.toString() : 'Erreur');
          calcState={a:(Number.isFinite(r)? r.toString() : null), op:null, b:null, fresh:true};
        }
        return;
      }
      if(['+','‚àí','√ó','√∑'].includes(k)){
        if(calcState.a===null && calcDisplay.value) calcState.a = calcDisplay.value;
        if(calcState.a!==null && calcState.op && calcState.b!==null){
          const r = applyOp(calcState.a, calcState.op, calcState.b);
          calcState.a = Number.isFinite(r)? r.toString() : null; calcState.b=null;
          setDisplay(Number.isFinite(r)? r.toString() : 'Erreur');
        }
        calcState.op = k; calcState.fresh=true; return;
      }
      // chiffre / point
      if(calcState.fresh){ setDisplay(k); calcState.fresh=false; }
      else setDisplay(calcDisplay.value + k);
      if(calcState.op){ calcState.b = calcDisplay.value; } else { calcState.a = calcDisplay.value; }
    }
    const layout = [
      ['7','8','9','√∑'],
      ['4','5','6','√ó'],
      ['1','2','3','‚àí'],
      ['0','.','C','+'],
      ['=']
    ];
    layout.forEach(row=> row.forEach(k=>{
      const b=document.createElement('button');
      b.className='btn' + (['+','‚àí','√ó','√∑'].includes(k)?' op': (k==='='?' eq':'' ));
      b.textContent=k; b.addEventListener('click', ()=>press(k));
      calcGrid.appendChild(b);
    }));
  }

  // Terminal
  const termOut = document.getElementById('terminalOutput');
  const termIn = document.getElementById('terminalInput');
  if(termOut && termIn){
    function print(line){ termOut.innerHTML += `<div>${line}</div>`; termOut.scrollTop = termOut.scrollHeight; }
    function prompt(){ print(`<span class="prompt">guyliane@linux-web:~$</span>`); }
    const fs = ['notes.txt','projets','readme.md','calc.log'];
    function run(cmd){
      if(!cmd) return;
      const c = cmd.trim();
      if(c==='help'){
        print('Commandes: help, echo <txt>, ls, date, uname, clear');
      } else if(c.startsWith('echo ')){
        print(c.slice(5));
      } else if(c==='ls'){
        print(fs.join('  '));
      } else if(c==='date'){
        print(new Date().toString());
      } else if(c==='uname'){
        print('Linux web 5.15.0 (simul√©)');
      } else if(c==='clear'){
        termOut.innerHTML='';
      } else {
        print('Commande inconnue: '+c);
      }
      prompt();
    }
    termIn.addEventListener('keydown', (e)=>{
      if(e.key==='Enter'){
        const v = termIn.value; termIn.value='';
        print(`<span class="prompt">guyliane@linux-web:~$</span> ${v}`);
        run(v);
      }
    });
    termOut.innerHTML = `<div>Bienvenue dans le terminal web. Tapez 'help'.</div>`; prompt();
  }

  // S√©lection des √©l√©ments
const iframe = document.getElementById('nav-iframe');
const urlInput = document.getElementById('nav-url');
const btnBack = document.getElementById('nav-back');
const btnForward = document.getElementById('nav-forward');
const btnGo = document.getElementById('nav-go');
const btnReload = document.getElementById('nav-reload');

// Historique simple c√¥t√© parent (car on ne peut pas acc√©der √† l'historique cross-origin)
let historyStack = [];
let historyIndex = -1;
let lastTrackedUrl = iframe.src || 'about:blank';

// Normalise l'entr√©e : si ressemble √† URL on la retourne, sinon on fait une recherche Google
function normalizeInputToUrl(input) {
  input = (input || '').trim();
  if (!input) return 'about:blank';
  // Si commence par http(s) ou about: ou data:
  if (/^(https?:|about:|data:)/i.test(input)) return input;
  // Si contient un espace -> recherche
  if (/\s/.test(input)) {
    return 'https://www.google.com/search?q=' + encodeURIComponent(input);
  }
  // Si contient un point et pas d'espace -> probable URL sans protocole
  if (/\./.test(input)) {
    return (input.startsWith('//') ? window.location.protocol + input : (input.startsWith('http') ? input : 'https://' + input));
  }
  // Sinon recherche
  return 'https://www.google.com/search?q=' + encodeURIComponent(input);
}

// Met √† jour l'√©tat des boutons (d√©sactiv√©s/activ√©s)
function updateNavButtons() {
  btnBack.disabled = historyIndex <= 0;
  btnForward.disabled = historyIndex >= historyStack.length - 1 || historyIndex === -1;
  // style visuel simple pour disabled
  [btnBack, btnForward].forEach(b => {
    b.style.opacity = b.disabled ? '0.5' : '1';
    b.style.cursor = b.disabled ? 'default' : 'pointer';
  });
}

// Pousse une URL dans l'historique (√©vite doublons cons√©cutifs)
function pushHistory(url) {
  if (!url) return;
  // si on navigue apr√®s √™tre revenu en arri√®re, tronquer la suite
  if (historyIndex < historyStack.length - 1) {
    historyStack = historyStack.slice(0, historyIndex + 1);
  }
  // √©viter doublon imm√©diat
  if (historyStack[historyStack.length - 1] !== url) {
    historyStack.push(url);
    historyIndex = historyStack.length - 1;
  }
  updateNavButtons();
}

// Navigue vers une URL (option pushHistory = true)
function navigateTo(rawInput, push = true) {
  const url = normalizeInputToUrl(rawInput);
  lastTrackedUrl = url;
  iframe.src = url;
  urlInput.value = url;
  if (push) pushHistory(url);
}

// Retour dans l'historique
function goBack() {
  if (historyIndex > 0) {
    historyIndex -= 1;
    const url = historyStack[historyIndex];
    lastTrackedUrl = url;
    iframe.src = url;
    urlInput.value = url;
    updateNavButtons();
  }
}

// Avancer dans l'historique
function goForward() {
  if (historyIndex < historyStack.length - 1) {
    historyIndex += 1;
    const url = historyStack[historyIndex];
    lastTrackedUrl = url;
    iframe.src = url;
    urlInput.value = url;
    updateNavButtons();
  }
}

// Recharger l'iframe (force reload)
function reloadIframe() {
  // m√©thode simple : r√©assigner src
  iframe.src = iframe.src || lastTrackedUrl;
}

// √âv√©nements UI
btnGo.addEventListener('click', () => navigateTo(urlInput.value, true));
btnBack.addEventListener('click', goBack);
btnForward.addEventListener('click', goForward);
btnReload.addEventListener('click', reloadIframe);

// Touche Entr√©e dans le champ URL
urlInput.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    e.preventDefault();
    navigateTo(urlInput.value, true);
  }
});

// Quand l'iframe charge, on tente de r√©cup√©rer l'URL r√©elle (si m√™me origine), sinon on affiche la derni√®re URL suivie
iframe.addEventListener('load', () => {
  try {
    // Peut √©chouer en cross-origin
    const realUrl = iframe.contentWindow.location.href;
    if (realUrl && realUrl !== 'about:blank') {
      lastTrackedUrl = realUrl;
      urlInput.value = realUrl;
      // si l'URL diff√®re de l'historique, on l'ajoute (utile si la page a redirig√©)
      if (historyStack[historyIndex] !== realUrl) {
        pushHistory(realUrl);
      }
    } else {
      urlInput.value = lastTrackedUrl;
    }
  } catch (err) {
    // Cross-origin : on ne peut pas lire, on restaure la derni√®re URL connue
    urlInput.value = lastTrackedUrl;
  }
  updateNavButtons();
});

// Initialisation : remplir l'historique avec la src initiale
(function init() {
  const initial = iframe.src || lastTrackedUrl || 'about:blank';
  lastTrackedUrl = initial;
  pushHistory(initial);
  urlInput.value = initial;
  updateNavButtons();
})();

// Hooks pour les contr√¥les de fen√™tre (data-type="window")
// Ces handlers √©mettent des CustomEvent sur document pour que ton code principal les capture
document.querySelectorAll('[data-type="window"]').forEach(el => {
  el.addEventListener('click', (ev) => {
    const act = el.getAttribute('data-act');
    if (!act) return;
    // √âmettre un √©v√©nement personnalis√© : 'window-control' avec detail { action: act }
    document.dispatchEvent(new CustomEvent('window-control', { detail: { action: act, source: el } }));
    // comportement par d√©faut minimal (tu peux surcharger en √©coutant l'√©v√©nement)
    if (act === 'close') {
      // exemple : masquer la fen√™tre
      const win = el.closest('.window');
      if (win) win.style.display = 'none';
    } else if (act === 'min') {
      const win = el.closest('.window');
      if (win) win.style.height = '40px';
    } else if (act === 'max') {
      const win = el.closest('.window');
      if (win) {
        win.style.top = '20px';
        win.style.left = '20px';
        win.style.width = 'calc(100% - 40px)';
        win.style.height = 'calc(100% - 40px)';
      }
    }
  });
});

// Exposer quelques fonctions utiles globalement si besoin
window.simpleNav = {
  navigateTo,
  goBack,
  goForward,
  reloadIframe,
  getHistory: () => ({ stack: historyStack.slice(), index: historyIndex }),
};

</script>
</body>
</html>
