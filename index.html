<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simulation de démarrage — Linux style</title>
  <style>
    html,body{height:100%;margin:0;background:#000;color:#fff;font-family:"SFMono-Regular",Consolas,Monaco,monospace}
    .screen{height:100%;display:flex;align-items:flex-start;justify-content:flex-start;padding:28px 36px;box-sizing:border-box;overflow:hidden}
    .terminal{max-width:1200px;width:100%;border-radius:6px;padding:12px 18px;box-sizing:border-box;background:rgba(0,0,0,0.15);backdrop-filter:blur(2px)}
    pre{margin:0;white-space:pre-wrap;word-break:break-word;font-size:16px;line-height:1.4}
    .line{color:#ddd;opacity:0;transition:opacity .3s}
    .timestamp{color:#8fbcd4;margin-right:10px}
    .continue-message{margin-top:20px;font-size:18px;color:#0f0;animation:blinkText 1s infinite}
    @keyframes blinkText{50%{opacity:0}}
    @media (max-width:600px){.screen{padding:12px}.terminal{padding:8px}}
  </style>
</head>
<body>
  <div class="screen">
    <div class="terminal" role="region" aria-label="Écran de démarrage simulé">
      <pre id="output" aria-live="polite"></pre>
      <div class="progress" aria-hidden="true"><i id="bar"></i></div>
      <div id="continue" class="continue-message" style="display:none;">Appuyer sur entrée pour continuer</div>
    </div>
  </div>
  <script>
    const lines = [
      '[OK] Initialisation du kernel Ubuntwo version ',
      '[OK] Détection du matériel: CPU x8 — 3.20 GHz',
      '[OK] Mémoire: 16 GiB détectés',
      '[INFO] Montage des partitions: /, /home, /var',
      '[OK] Système de fichiers vérifié',
      '[OK] Chargement des modules: ext4, snd, i915',
      '[INFO] Configuration réseau: dhcp... obtenu 192.168.1.42',
      '[OK] Démarrage des services: sshd, systemd-logind, dbus',
      '[WARN] Mise à jour automatique des géants du net désactivée',
      '[INFO] Lancement du démon de confidentialité: enabled',
      '>> Vérification des trackers GAFAM... 42 résultats trouvés',
      '>> Bloquage des collecteurs: en cours',
      '[OK] Cookies suspects supprimés',
      '[INFO] Formation d\'un réseau local anti-snoop (tm)',
      '[INFO] Message du sysadmin: "Arrêtez de confier votre vie aux GAFAM. Reprenez-en le contrôle."',
      '[DEBUG] Mode mascotte ajouté: Tux fait un high-five',
      '[WARN] Nettoyage des spywares américains',
      '[OK] Interface graphique prête (Xorg fallback)',
      '[OK] Gestionnaire de paquets: apt, snap disabled — paix retrouvée',
      '[INFO] Why does astronauts use Linux ? Because we can\'t open Windows in space. #JMR',
      '[OK] Activation du pare-feu: ufw profile: home',
      '[OK] Services utilisateurs prêtes: userd, cron, docker',
      '[INFO] Démarrage de GNOME Shell — bienvenue !',
      '[OK] Démarrage terminé. Bonne session sous Linux :)'
    ];

    const output = document.getElementById('output');
    const bar = document.getElementById('bar');
    const continueMsg = document.getElementById('continue');

    async function showLines(list){
      let progress = 0;
      for(let i=0;i<list.length;i++){
        const t = document.createElement('div');
        t.className = 'line';
        const timeStamp = new Date().toLocaleTimeString();
        t.innerHTML = `<span class="timestamp">${timeStamp}</span><span>${list[i]}</span>`;
        output.appendChild(t);
        // fade in
        requestAnimationFrame(()=>{t.style.opacity=1;});
        progress += (1/list.length)*100;
        bar.style.width = Math.min(100, progress) + '%';

        // rythme : certaines lignes instantanées, parfois pause
        if(i % 4 === 0){ // toutes les 4 lignes, pause d'1s
          await new Promise(r=>setTimeout(r,1000));
        } else {
          await new Promise(r=>setTimeout(r,150)); // petite latence rapide
        }
        window.scrollTo(0, document.body.scrollHeight);
      }
    }

    async function start(){
      output.innerHTML='';
      bar.style.width='2%';
      await showLines(lines);
      const final=document.createElement('div');
      final.className='line';
      final.style.opacity=1;
      final.innerHTML=`<span class="timestamp">${new Date().toLocaleTimeString()}</span> <span>systemd: session established. Enjoy your freedom.</span>`;
      output.appendChild(final);
      bar.style.width='100%';
      continueMsg.style.display='block';
    }

    start();

    window.addEventListener('keydown',(e)=>{
      if(e.code==='Enter' && continueMsg.style.display==='block'){
        window.location.href='pageConnexion.html';
      }
    });
  </script>
</body>
</html>
